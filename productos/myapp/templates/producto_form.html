{% extends 'base.html' %}

{% block title %}{% if object %}Editar Producto{% else %}Crear Producto{% endif %}{% endblock %}

{% block content %}
<h1 class="mb-4">{% if object %}Editar Producto{% else %}Crear Producto{% endif %}</h1>

<form method="post" novalidate>
    {% csrf_token %}
    <div class="card">
        <div class="card-body">
            <!-- Nombre -->
            <div class="mb-3">
                <label for="{{ form.nombre.id_for_label }}" class="form-label">Nombre</label>
                {{ form.nombre }}
                {% if form.nombre.errors %}
                <div class="text-danger">
                    {{ form.nombre.errors|first }}
                </div>
                {% endif %}
            </div>

            <!-- Descripción -->
            <div class="mb-3">
                <label for="{{ form.descripcion.id_for_label }}" class="form-label">Descripción</label>
                {{ form.descripcion }}
                {% if form.descripcion.errors %}
                <div class="text-danger">
                    {{ form.descripcion.errors|first }}
                </div>
                {% endif %}
            </div>

            <!-- Precio -->
            <div class="mb-3">
                <label for="{{ form.precio.id_for_label }}" class="form-label">Precio</label>
                {{ form.precio }}
                {% if form.precio.errors %}
                <div class="text-danger">
                    {{ form.precio.errors|first }}
                </div>
                {% endif %}
            </div>

            <!-- Categoría -->
            <div class="mb-3">
                <label for="{{ form.categoria.id_for_label }}" class="form-label">Categoría</label>
                {{ form.categoria }}
                {% if form.categoria.errors %}
                <div class="text-danger">
                    {{ form.categoria.errors|first }}
                </div>
                {% endif %}
            </div>

            <!-- Etiquetas (Checkbox Multiple) -->
            <div class="mb-3">
                <label class="form-label">Etiquetas</label>
                <div class="row">
                    {% for etiqueta in form.etiquetas %}
                    <div class="col-md-4">
                        <div class="form-check">
                            <input type="checkbox"
                                class="form-check-input"
                                name="etiquetas"
                                id="id_etiquetas_{{ forloop.counter0 }}"
                                value="{{ etiqueta.id }}"
                                {% if etiqueta.id in form.initial.etiquetas %}checked{% endif %}>
                            <label class="form-check-label" for="id_etiquetas_{{ forloop.counter0 }}">
                                {{ etiqueta }}
                            </label>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <!-- Detalles -->
            <div class="mb-3">
                <label class="form-label">Detalles</label>
                <div class="row">
                    <div class="col-md-6">
                        <label for="id_dimensiones" class="form-label">Dimensiones</label>
                        <input type="text" class="form-control" id="id_dimensiones" name="dimensiones" value="{% if form.dimensiones.value %}{{ form.dimensiones.value }}{% endif %}" placeholder="Ej: 10x20x30 cm">
                    </div>
                    <div class="col-md-6">
                        <label for="id_peso" class="form-label">Peso (kg)</label>
                        <input type="number" step="0.01" class="form-control" id="id_peso" name="peso" value="{% if form.peso.value %}{{ form.peso.value }}{% endif %}" placeholder="Ej: 1.5">
                    </div>
                </div>
            </div>
        </div>

        <!-- Botones -->
        <div class="card-footer">
            <button type="submit" class="btn btn-primary">
                <i class="bi bi-save"></i> Guardar
            </button>
            <a href="{% url 'producto-list' %}" class="btn btn-secondary">
                <i class="bi bi-x-lg"></i> Cancelar
            </a>
        </div>
    </div>
</form>
{% endblock %}